# UnumID Core Types

This project contains all of our shared, generic Typescript types that are used through out the [UnumID](https://https://docs.unum.id/) core ecosystem. 

## Conventions

### Naming

a) Generic types such as `PresentationRequest`, as defined here, ought to be the simplest naming conventions. The generic type represents the domain type definition. If the object is used for persistence this generic type includes the persisted metadata, i.e. `uuid`, `createdAt`, and `updatedAt`. 

b) For generic types that are not directly persisted, i.e. `CredentialRequest`, the naming convention also ought to be the simplest.

c) For generic types that represent an object consisting of options for creating a persisted entity they should have succeeding `Options` naming convention. For example, `IssueCredentialOptions` or `EncryptedCredentialOptions`.

d) Types explicitly for HTTP interfaces ought have a trailing `Dto`, i.e. `PresentationRequestDto`. This is often used to better represent for the JSON serialized attributes `createdAt` and `updatedAt` from `Date` to `string`. Furthermore, if the Data Transfer Object is different between the HTTP request verbs, i.e. GET and POST, then include in the type as such, `PresentationRequestPostDto`.

e) HTTP types that encompass other DTOs, that are not just a serialization of one object, should use the naming convention "EnrichedDto". For example the `PresentationRequestEnrichedDto` encompasses the PresentationRequestDto type along with other fields supplementary to the `PresentationRequestDto` type.

f) Types that are used for cryptographic purposes should have a unsigned and signed version. However, the signed type should have the simpler naming convention, i.e. `Credential` is the signed type of `UnsignedCredential`. 

_Note: any types that undergo cryptographic operations need to be defined via Protocol Buffers in order to leverage their deterministic byte array properties. Thus should not be defined solely in this ts types project._

g) Entity types belong in the projects that interface with their data layers. For example, the PresentationRequest entity type, `PresentationRequestEntity`, should not be defined generically, but rather in the SaaS project types.

## Documentation
Detailed documentation generated from source can be found [here](https://docs.unum.id/core-types/index.html) which is served by this [repo](https://github.com/UnumID/core-types)'s Github Pages configuration. It is setup to server via the /docs folder of the main branch.

In order to generate the documentation from the source code run the `createTypedocs.sh` script. However, note that this is now handled automatically by the release CI job.

## Release
Releases and publishing to NPM is automated via Github Actions CI job. In order to trigger a release one should push a git tag with a preceding `v` with semver notation, ie `v1.1.1`, to the `main` branch. This will trigger the CI job to bump the package version, generate typedocs, publish to NPM, make a release commit, and make a Github Release. The contents of the Github Release are autogenerated based on pull requests with commits associated with the release, so please use PRs to makes changes to `main`. The message of the git tag will be the commit message for the release so please make it meaningful. For example, `git tag v1.1.1 -m "Updated project with a new CI job" && git push origin v1.1.1 && git tag -d v1.1.1`.